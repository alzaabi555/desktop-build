name: Windows Release ğŸ–¥ï¸

on:
  push:
    branches: [ "main" ]
  workflow_dispatch: # Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠØ¯ÙˆÙŠ

permissions:
  contents: write

jobs:
  build-windows:
    name: Build & Release EXE
    runs-on: windows-latest # Ø¨ÙŠØ¦Ø© ÙˆÙ†Ø¯ÙˆØ² Ù„Ø¨Ù†Ø§Ø¡ Ù…Ù„Ù exe
    
    steps:
      - name: Checkout Code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: 'npm'

      - name: Install Dependencies
        # ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
        run: npm install

      - name: Build React App (Vite)
        # Ø¨Ù†Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        run: npm run build

      - name: Build & Publish Electron
        env:
          # Ù‡Ø°Ø§ Ø§Ù„ØªÙˆÙƒÙ† ÙŠØ£ØªÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø¬ÙŠØª Ù‡Ø¨
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        # ÙŠÙ‚ÙˆÙ… Ø¨Ø¨Ù†Ø§Ø¡ Ù…Ù„Ù exe ÙˆØ±ÙØ¹Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ù„Ù‰ Releases
        run: npx electron-builder --win --publish always
