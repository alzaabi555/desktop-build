
<!DOCTYPE html>
<html lang="ar" dir="rtl" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  
  <title>راصد</title>
  
  <link rel="icon" type="image/png" href="icon.png?v=6">
  <link rel="apple-touch-icon" href="icon.png?v=6">
  
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="راصد">
  
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#f1f5f9">
  <link rel="manifest" href="manifest.json">
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            glass: {
              100: 'var(--glass-border)',
              200: 'var(--glass-bg)',
            }
          },
          fontFamily: {
            sans: ['Tajawal', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
  
  <style>
    :root { 
      --sat: env(safe-area-inset-top, 20px); 
      --sab: env(safe-area-inset-bottom, 20px); 
      
      /* --- ICE THEME (Corrected for Visibility) --- */
      /* Background must be slightly darker (Silver) so the White Glass pops */
      --bg-base: #e2e8f0; /* Cool Silver/Slate 200 */
      
      /* Glass is white but semi-transparent */
      --glass-bg: rgba(255, 255, 255, 0.65); 
      --glass-border: rgba(255, 255, 255, 0.95); /* Sharp white edges */
      --glass-shadow: rgba(148, 163, 184, 0.15); /* Slate shadow */
      
      --text-main: #1e293b; /* Slate 800 */
      --text-muted: #64748b;
      --icon-bg: rgba(255, 255, 255, 0.8);
      --modal-bg: rgba(248, 250, 252, 0.85); /* Slate 50 */
      
      /* Orbs are Pure White/Lightest Gray to create "Glow" inside the Silver */
      --orb-1: #ffffff; /* Pure White Light */
      --orb-2: #f1f5f9; /* Slate 100 */
      --orb-3: #cbd5e1; /* Slate 300 (Deep Ice Shadow) */
    }

    .dark {
      /* --- DARK BLACK ICE (Monochrome High Contrast) --- */
      --bg-base: #000000; /* Void Black */
      --glass-bg: rgba(25, 25, 25, 0.6); 
      --glass-border: rgba(255, 255, 255, 0.25); /* Stronger Frost Border */
      --glass-shadow: rgba(0, 0, 0, 0.8);
      --text-main: #ffffff; 
      --text-muted: #a3a3a3;
      --icon-bg: rgba(60, 60, 60, 0.5);
      --modal-bg: rgba(20, 20, 20, 0.85);

      /* Deep Ice Reflections */
      --orb-1: #1a1a1a; 
      --orb-2: #333333; 
      --orb-3: #0a0a0a; 
    }
    
    body { 
      font-family: 'Tajawal', sans-serif; 
      margin: 0; padding: 0; 
      position: fixed; inset: 0; height: 100%; width: 100%;
      overflow: hidden;
      -webkit-user-select: none; user-select: none;
      background-color: var(--bg-base);
      color: var(--text-main);
      transition: color 0.5s ease;
    }

    /* --- THE ICE ENGINE (Updated for Depth) --- */
    .aurora-bg {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        z-index: -2;
        /* Gradient from Silver to White */
        background: linear-gradient(135deg, var(--bg-base) 0%, var(--orb-3) 100%);
        opacity: 1;
        transition: opacity 0.5s ease;
    }
    
    .aurora-orb {
        position: fixed;
        border-radius: 50%;
        filter: blur(60px); /* Reduced blur to make shapes clearer behind glass */
        z-index: -1;
        opacity: 0.8; /* Increased opacity for visibility */
        transition: background-color 1s ease;
        animation: float 25s infinite ease-in-out;
    }
    
    /* Positioned to create "Highlights" on the silver background */
    .orb-1 { top: -10%; left: -10%; width: 70vw; height: 70vw; background: var(--orb-1); animation-delay: 0s; }
    .orb-2 { bottom: -10%; right: -10%; width: 70vw; height: 70vw; background: var(--orb-2); animation-delay: -8s; }
    .orb-3 { top: 40%; left: 30%; width: 50vw; height: 50vw; background: var(--orb-1); animation-delay: -4s; filter: blur(40px); }

    /* Frost Texture Overlay (Stronger Grain) */
    .noise-overlay {
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        z-index: -1;
        opacity: 0.08; /* Increased grain for "Frost" feel */
        pointer-events: none;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        mix-blend-mode: overlay;
    }

    /* --- GLASS UTILITIES --- */
    
    /* Standard Glass Card */
    .glass-card {
        background: var(--glass-bg);
        backdrop-filter: blur(12px) saturate(120%); /* Reduced blur to see background texture */
        -webkit-backdrop-filter: blur(12px) saturate(120%);
        border: 1.5px solid var(--glass-border); /* Thicker border for ice edge effect */
        box-shadow: 0 4px 20px var(--glass-shadow), inset 0 0 20px rgba(255,255,255,0.5); /* Inner glow */
        color: var(--text-main);
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    
    .glass-card:hover {
        background: rgba(255, 255, 255, 0.75);
        border-color: #ffffff;
        box-shadow: 0 10px 30px var(--glass-shadow), inset 0 0 10px rgba(255,255,255,0.8);
        transform: translateY(-2px) scale(1.005);
    }
    
    .dark .glass-card:hover {
        background: rgba(40, 40, 40, 0.6);
    }

    /* Heavy Glass (Sidebar, Modals) */
    .glass-heavy {
        background: var(--modal-bg);
        backdrop-filter: blur(30px);
        -webkit-backdrop-filter: blur(30px);
        border: 1px solid var(--glass-border);
        box-shadow: 0 20px 60px var(--glass-shadow);
        color: var(--text-main);
    }

    /* Glass Icon */
    .glass-icon {
        background: var(--icon-bg);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.8);
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }
    .glass-icon:active { transform: scale(0.92); }

    /* Inputs */
    .glass-input {
        background: rgba(255, 255, 255, 0.4);
        border: 1px solid var(--glass-border);
        color: var(--text-main);
        backdrop-filter: blur(10px);
        box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
    }
    .glass-input:focus {
        background: rgba(255, 255, 255, 0.8);
        border-color: #ffffff;
        box-shadow: 0 0 0 3px rgba(255,255,255,0.5);
    }
    .glass-input::placeholder { color: var(--text-muted); opacity: 0.7; }
    
    .text-glow { text-shadow: 0 2px 10px rgba(255,255,255,0.8); }
    .dark .text-glow { text-shadow: 0 2px 10px rgba(0,0,0,0.5); }

    ::-webkit-scrollbar { width: 0px; background: transparent; }
    
    @keyframes float {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        33% { transform: translate(30px, -50px) rotate(5deg); }
        66% { transform: translate(-20px, 20px) rotate(-5deg); }
    }

    #initial-loader {
      position: fixed; inset: 0; background: #e2e8f0; 
      display: flex; flex-direction: column; align-items: center; 
      justify-content: center; z-index: 9999;
      transition: opacity 0.4s ease;
    }
    .dark #initial-loader { background: #000000; }
    
    .loader-spinner { width: 40px; height: 40px; border: 4px solid rgba(0, 0, 0, 0.1); border-top-color: #1e293b; border-radius: 50%; animation: spin 1s linear infinite; }
    .dark .loader-spinner { border: 4px solid rgba(255, 255, 255, 0.1); border-top-color: #fff; }
    
    #loader-error { display: none; margin-top: 20px; text-align: center; }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>

  <script>
    window.process = window.process || { env: { NODE_ENV: 'production' } };
  </script>
<script type="importmap">
{
  "imports": {
    "lucide-react": "https://esm.sh/lucide-react@0.292.0",
    "@capacitor/filesystem": "https://esm.sh/@capacitor/filesystem@5.0.0",
    "@capacitor/core": "https://esm.sh/@capacitor/core@5.0.0",
    "@capacitor/app": "https://esm.sh/@capacitor/app@5.0.0",
    "@capacitor/local-notifications": "https://esm.sh/@capacitor/local-notifications@5.0.0",
    "recharts": "https://esm.sh/recharts@2.12.7?external=react,react-dom",
    "xlsx": "https://esm.sh/xlsx@0.18.5",
    "@capacitor/share": "https://esm.sh/@capacitor/share@5.0.0",
    "html-docx-js-typescript": "https://esm.sh/html-docx-js-typescript@0.1.5",
    "react": "https://esm.sh/react@18.3.1",
    "react-dom/": "https://esm.sh/react-dom@18.3.1/",
    "react/": "https://esm.sh/react@18.3.1/",
    "@capacitor/browser": "https://esm.sh/@capacitor/browser@5.0.0",
    "react-dom": "https://esm.sh/react-dom@18.3.1",
    "framer-motion": "https://esm.sh/framer-motion@10.16.4?external=react,react-dom"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body oncontextmenu="return false;">
  <div class="aurora-bg"></div>
  <div class="aurora-orb orb-1"></div>
  <div class="aurora-orb orb-2"></div>
  <div class="aurora-orb orb-3"></div>
  <div class="noise-overlay"></div>
  <div id="initial-loader">
      <div class="loader-spinner"></div>
      <div style="margin-top:15px; font-weight: 800; color: #1e293b; letter-spacing: 2px;" class="dark:text-white">RASED</div>
      <div id="loader-error"><p style="color: #ef4444; font-size: 14px;">حدث خطأ</p><button class="retry-btn" onclick="window.location.reload()">إعادة</button></div>
  </div>
  <div id="root"></div>
  <script type="module" src="./index.js?v=8.0.0"></script>
  <script>
    window.onerror = function(msg) { var loader = document.getElementById('initial-loader'); var errorDiv = document.getElementById('loader-error'); if(loader && errorDiv) { document.querySelector('.loader-spinner').style.display = 'none'; errorDiv.style.display = 'block'; errorDiv.innerHTML += '<br><span style="font-size:10px;color:#888">' + msg + '</span>'; } return false; };
    setTimeout(function() { var loader = document.getElementById('initial-loader'); if(loader && loader.style.opacity !== '0') { document.getElementById('loader-error').style.display = 'block'; } }, 10000);
  </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
